<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="http://www.lvkangzixun.net/cnys/res/css/amazeui.min.css" rel="stylesheet" />
    <script src="http://www.lvkangzixun.net/cnys/res/js/jquery.min.js"></script>
    <script src="http://www.lvkangzixun.net/cnys/res/js/amazeui.min.js"></script>
    <title>nim编程语言-中国社区</title>
    <style>
        .am-article-bd a {
            color: #333;
        }
    </style>
    <script>
        $(function () {
            var startRow = 0;
            var maxRow = 1;
            var pageSize = 30

            $.get("/GetArticleList/" + startRow, function (data) {
                var da = JSON.parse(data);
                startRow = da.StartRow;
                maxRow = da.ArticleCount;
                pageSize = da.PageSize;
                for (var i = 0; i < da.Rows.length; i++) {
                    var str = "<article><h4><a href=\"/article.html?id=" + da.Rows[i].article_id + "\">" + da.Rows[i].article_title + "</a></h4><div>" + da.Rows[i].article_summary + "</div></article><hr class=\"am-article-divider\">";
                    $("#articleList").append(str);
                }
            });
            $("#AddArticleBtn").click(function () {
                window.location.href = "/AddArticle.html";
            })

            $("#PagePre").click(function () {
                if (startRow - pageSize < 0) {
                    return;
                }
                window.location.href = "/Default.aspx?startRow=" + (startRow - pageSize)
            });
            $("#PageNext").click(function () {
                if (startRow + pageSize >= maxRow) {
                    return;
                }
                window.location.href = "/Default.aspx?startRow=" + (startRow + pageSize)
            });
            if (location.href.search("Search") > 0) {
                $("#PageNext").hide();
                $("#PagePre").hide();
            }
        })
    </script>
</head>
<body>
    <header class="am-topbar">
        <div class=" am-container">
            <h1 class="am-topbar-brand">
                <a href="/index.html">nim编程语言-中国社区</a>
            </h1>

            <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only"
                    data-am-collapse="{target: '#doc-topbar-collapse'}">
                <span class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span>
            </button>

            <div class="am-collapse am-topbar-collapse" id="doc-topbar-collapse">
                <form class="am-topbar-form am-topbar-left am-form-inline am-topbar-right" role="search" style="margin-top: 6px; padding: 0px; margin-right: 0px">
                    <div class="am-form-group">
                        <input id="SearchTxt" type="text" class="am-form-field am-input-sm" placeholder="此功能未完成">
                    </div>
                    <button id="SearchBtn" type="button" class="am-btn am-btn-default am-btn-sm">搜索</button>
                </form>

            </div>
        </div>
    </header>


    <div class="am-g am-g-fixed blog-g-fixed">
        <div class="am-u-md-8">
            <div  id="articleList">

            </div>
            <ul class="am-pagination blog-pagination">
                <li class="am-pagination-prev"><button class="am-btn am-btn-default" id="PagePre">&laquo; 上一页</button></li>
                <li class="am-pagination-next"><button class="am-btn am-btn-default" id="PageNext">下一页 &raquo;</button></li>
            </ul>
        </div>
        <div class="am-u-md-4 blog-sidebar">
            <div class="am-panel-group">

                <section class="am-panel am-panel-default">
                    <div class="am-panel-hd">文章目录</div>
                    <div class="am-panel-bd">
                        <span class="am-badge am-radius">此功能尚未完成</span>
                    </div>
                </section>
                <section class="am-panel am-panel-default">
                    <div class="am-panel-hd">操作</div>
                    <div class="am-panel-bd">
                        <button id="AddArticleBtn" class="am-btn am-btn-success am-btn-sm AdBtn">增加文章</button>
                    </div>
                </section>

            </div>
        </div>

    </div>
    <footer class="am-margin-top am-container">
        <hr />
        <p class="am-text-center">
            <small>
                CopyRight 2015 nim-lang.com
            </small>
        </p>
    </footer>
    <div class="am-modal am-modal-no-btn" tabindex="-1" id="AdModal">
        <div class="am-modal-dialog">
            <div class="am-modal-hd" style="margin-bottom: 6px;">
                这里放点东西
            </div>
            <div class="am-modal-bd">
                <div class="am-form am-form-horizontal">
                    <p>
                        这里放点东西
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script>
        //$(function () {
        //    $(".AdBtn").click(function () {
        //        $('#AdModal').modal({ closeViaDimmer: 1, width: 320, height: 100 });
        //    });
        //    $("#SearchBtn").click(function () {
        //        var str = $("#SearchTxt").val();
        //        if (str.length < 1) {
        //            alert("检索的内容不能为空");
        //            return;
        //        }
        //        window.location.href = "/Default.aspx?Search=" + encodeURI(str);
        //    });

        //})
    </script>

</body>
</html>
